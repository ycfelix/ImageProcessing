/*
 * main.cpp
 *
 *  Created on: 2018¦~12¤ë27¤é
 *      Author: yauch
 */


#include "pavlidis.h"
#include <iostream>

using namespace std;

typedef struct
{
	int imageData[36*36]={0};
	int 	width=36;
	int 	height=36;
	int 	widthStep=36;

}IplImage;



int main(int argc, char* argv[])
{

	IplImage src_img;
	IplImage src_bin, dst_contour;
	int imageData[]={255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255
			,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255
			,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255
			,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255
			,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255
			,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255
			,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255
			,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255
			,255,255,255,255,255,255,255,255,255,255,255,255,182,36,0,0,0,0,0,0,0,0,0,0,36,146,255,255,255,255,255,255,255,255,255,255
			,255,255,255,255,255,255,255,255,255,255,255,182,0,0,0,0,0,0,0,0,0,0,0,0,0,0,255,255,255,255,255,255,255,255,255,255
			,255,255,255,255,255,255,255,255,182,36,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,146,255,255,255,255,255,255,255,255,255
			,255,255,255,255,255,255,182,36,0,0,0,0,0,0,109,255,255,255,255,255,255,255,255,0,0,0,0,255,255,255,255,255,255,255,255,255
			,255,255,255,255,255,182,0,0,0,0,0,0,109,255,255,255,255,255,255,255,255,255,255,146,0,0,0,255,255,255,255,255,255,255,255,255
			,255,255,255,255,255,0,0,0,0,0,109,255,255,255,255,255,255,255,255,255,255,255,255,255,0,0,0,255,255,255,255,255,255,255,255,255
			,255,255,255,255,182,0,0,0,109,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,0,0,0,255,255,255,255,255,255,255,255,255
			,255,255,255,255,0,0,0,0,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,0,0,0,255,255,255,255,255,255,255,255,255
			,255,255,255,255,0,0,0,109,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,0,0,0,146,255,255,255,255,255,255,255,255
			,255,255,255,255,0,0,0,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,0,0,0,0,255,255,255,255,255,255,255,255
			,255,255,255,255,0,0,0,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,146,0,0,0,255,255,255,255,255,255,255,255
			,255,255,255,255,0,0,0,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,0,0,0,146,255,255,255,255,255,255,255
			,255,255,255,182,0,0,0,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,0,0,0,0,255,255,255,255,255,255,255
			,255,255,255,0,0,0,0,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,146,0,0,0,255,255,255,255,255,255,255
			,255,255,255,0,0,0,109,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,0,0,0,255,255,255,255,255,255,255
			,255,255,255,0,0,0,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,0,0,0,255,255,255,255,255,255,255
			,255,255,255,0,0,0,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,0,0,0,255,255,255,255,255,255,255
			,255,255,255,0,0,0,146,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,0,0,0,255,255,255,255,255,255,255
			,255,255,255,0,0,0,0,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,182,0,0,0,255,255,255,255,255,255,255
			,255,255,255,146,0,0,0,146,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,182,0,0,0,0,255,255,255,255,255,255,255
			,255,255,255,255,0,0,0,0,146,255,255,255,255,255,255,255,255,255,255,255,255,255,182,36,0,0,0,0,109,255,255,255,255,255,255,255
			,255,255,255,255,146,0,0,0,0,0,36,146,255,255,255,255,255,255,182,36,0,0,0,0,0,0,0,109,255,255,255,255,255,255,255,255
			,255,255,255,255,255,146,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,109,255,255,255,255,255,255,255,255,255
			,255,255,255,255,255,255,146,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,109,255,255,255,255,255,255,255,255,255,255,255
			,255,255,255,255,255,255,255,255,255,146,0,0,0,0,0,0,0,0,0,0,109,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255
			,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255
			,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255
			,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255

						};
	memcpy(src_img.imageData,imageData,36*36*sizeof(int));




	// Binary
	for (int j=0;j<src_img.height;j++)
	{
		for (int i=0;i<src_img.width;i++)
		{
			int g = src_img.imageData[j*src_img.widthStep+i];

			if( g > 128 )
			{
				src_bin.imageData[j*src_bin.widthStep+i] = 0;
			}
			else
			{
				src_bin.imageData[j*src_bin.widthStep+i] = 255;
			}
		}
	}

	// Contour Tracing
	Pavlidis_contour_tracing(src_bin.imageData, src_bin.width, src_bin.height, src_bin.widthStep,
		dst_contour.imageData, dst_contour.width, dst_contour.height, dst_contour.widthStep);

	// Display
	for(int i=0;i<dst_contour.height;i++)
	{
		for(int j=0;j<dst_contour.width;j++)
			{
				cout<<dst_contour.imageData[i*dst_contour.height+j];
			}
		cout<<endl;
	}


	return 0;
}

